<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>配置分析结果</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .message { padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        pre { background-color: #f0f0f0; padding: 10px; border: 1px solid #ccc; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; }
        .mermaid { text-align: center; margin-top: 20px; border: 1px solid #eee; padding: 15px; border-radius: 5px; }
    </style>
</head>
<body>
<h1>配置分析结果</h1>
<p><strong>分析目标:</strong> {{ goal }}</p>

{% if message %}
    <div class="message error">
        <strong>分析失败:</strong> {{ message }}
    </div>
{% elif mermaid_code %}
    <div class="message success">
        <strong>分析成功:</strong> 已找到实现目标配置的依赖流程。
    </div>
    <h2>依赖流程图:</h2>
    <div class="mermaid">
        {{ mermaid_code | safe }}
    </div>
    <hr>
    <h2>Mermaid 代码:</h2>
    <pre><code>{{ mermaid_code }}</code></pre>
{% else %}
    <div class="message error">
        <strong>未知错误:</strong> 未能生成结果。
    </div>
{% endif %}

<br>
<a href="/">返回输入页面</a>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
    // Initialize Mermaid
    mermaid.initialize({ startOnLoad: true });
</script>
</body>
</html>
